<!DOCTYPE html>
<html>
<head>
<title>Fetch Data from Firestore and Display in OpenLayers</title>
<link rel="stylesheet" href="https://openlayers.org/en/v6.5.0/css/ol.css" type="text/css">
<script src="https://openlayers.org/en/v6.5.0/build/ol.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>

<script>
var map;
var vectorLayer;
var db;
var ref;

function init() {
  map = new ol.Map({
    target: "map",
    layers: [
      new ol.layer.Tile({
        source: new ol.source.OSM()
      })
    ],
    view: new ol.View({
      center: ol.proj.fromLonLat([0, 0]),
      zoom: 2
    })
  });

  vectorLayer = new ol.layer.Vector({
    source: new ol.source.Vector()
  });

  // Initialize Firebase
  var firebaseConfig = {
    apiKey: "AIzaSyDD13hgXWaH83Qd2uhYO9Xj0OHUaNEATC4",
  authDomain: "amc-man.firebaseapp.com",
  databaseURL: "https://amc-man-default-rtdb.firebaseio.com",
  projectId: "amc-man",
  storageBucket: "amc-man.appspot.com",
  messagingSenderId: "246677683335",
  appId: "1:246677683335:web:31428b4ba977f8eecd4c22",
  measurementId: "G-W917KVDD8D"
  };
  firebase.initializeApp(firebaseConfig);

  // Get the data from Firestore
  db = firebase.firestore();
  ref = db.collection("assets").doc("2zcN5DER0wAXvnNMI38Y");

  ref.onSnapshot(function(doc) {
    vectorLayer.getSource().clear();
    var assetData = doc.data();
    var latitude = assetData.assetLocation.latitude;
    var longitude = assetData.assetLocation.longitude;
    var point = new ol.geom.Point(ol.proj.fromLonLat([longitude, latitude]));
    var feature = new ol.Feature({
      geometry: point,
      data: assetData
    });
    vectorLayer.getSource().addFeature(feature);
    map.getView().fit(vectorLayer.getSource().getExtent(), { padding: [50, 50, 50, 50] });
  });

  map.addLayer(vectorLayer);
}

window.onload = init;
</script>
</head>
<body>
<div id="map" style="width: 100%; height: 500px;"></div>
</body>
</html>
